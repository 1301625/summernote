{% extends 'base.html' %}

{% block content %}

    <!---메세지-->
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li  {% if message.tags %} class=" {{ message.tags }} " {% endif %}> {{ message }} </li>
            {% endfor %}
        </ul>
    {% endif %}

    <main role="main">
        <section>
        </section>
        <div class="album py-5 bg-light">
            <div class="container">
                <div class="row">

                    {% for ob in object_list %}

                        <div class="col-md-4">
                            <div class="card mb-4 shadow-sm">
                                <svg class="bd-placeholder-img card-img-top" width="100%" height="225"
                                     xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice"
                                     focusable="false" role="img" aria-label="Placeholder: Thumbnail"><title>
                                    Placeholder</title>
                                    <rect width="100%" height="100%" fill="#55595c" data-darkreader-inline-fill=""
                                          style="--darkreader-inline-fill:#404243;"></rect>
                                    <text x="40%" y="50%" fill="#eceeef" dy=".3em" data-darkreader-inline-fill=""
                                          style="--darkreader-inline-fill:#eeeeed;">Thumbnail
                                    </text>
                                </svg>
                                <div class="card-body">
                                    <h5 class="card-text"><a href="{{ ob.get_absolute_url }}"
                                                             class="text-dark">{{ ob.title }} </a></h5>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="user-thumbnail">
                                            <svg class="bd-placeholder-img rounded-circle" width="25" height="25"
                                                 xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice"
                                                 focusable="false" role="img" aria-label="Placeholder: 140x140">
                                                <rect width="100%" height="100%" fill="#777"></rect>
                                            </svg>
                                            <img src="{{ ob.author.thumbnail.url }}" alt="">
                    

                                            {% if foo.author.nickname %}
                                                <small class="text-muted">
                                                    {{ ob.author.nickname }}
                                                </small>

                                            {% else %}
                                                <small class="text-muted">
                                                    {{ ob.author.name }}
                                                </small>
                                            {% endif %}
                                        </div>


                                        {% if ob.total_user < ob.user_max_count and not ob.date_overlap %}
                                            <small class="text-muted">{{ ob.total_user }} | {{ ob.user_max_count }} 참여
                                            </small>
                                            <small class="text-muted">{{ ob.deadline }} 까지</small>
                                        {% elif ob.date_overlap or ob.count_overlap %}
                                            <small class="text-muted">참여 마감!</small>
                                        {% endif %}

                                    </div>
                                </div>
                            </div>
                        </div>

                    {% endfor %}

                </div>
            </div>
        </div>
    </main>

{#    #}
{#    {% for foo in object_list %}#}
{#        <a href="{{ foo.get_absolute_url }}"><p>{{ foo.title }}</p></a>#}
{#        <p>{{ foo.content |safe |truncatechars:3 }}</p>#}
{#        {% if foo.total_user < foo.user_max_count and not foo.date_overlap %}#}
{#            <p>{{ foo.total_user }} | {{ foo.user_max_count }} 참여 </p>#}
            {# 현재시간 {% now "SHORT_DATE_FORMAT" %}#}
{#            <p>모집기간 : {{ foo.deadline }} 까지</p>#}
{#            남은기간 {{ foo.deadline|timeuntil }}#}
{#        {% elif foo.date_overlap or foo.count_overlap %}#}
{#            <p>참여 마감!</p>#}
{#        {% endif %}#}
{##}
{#        <!---닉네임 empty 체크 -->#}
{#        {% if foo.author.nickname %}#}
{#            <p>#}
{#                {{ foo.author.nickname }}#}
{#            </p>#}
{##}
{#        {% else %}#}
{#            <p>#}
{#                {{ foo.author.name }}#}
{#            </p>#}
{#        {% endif %}#}
{##}
{#    {% endfor %}#}



    <hr>

    {% if request.user.is_authenticated %}
        <a href="{% url 'new' %}">글생성</a>
        <a href="{% url 'logout' %}">로그아웃</a>
    {% else %}
        <a href="{% url 'signup' %}">회원가입</a>
        <a href="{% url 'login' %}">로그인</a>
    {% endif %}
{% endblock %}